<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Configurações</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, Helvetica, sans-serif;
}

body {
    background: #0f0f0f;
    color: #fff;
}

header {
    padding: 20px;
    background: #111;
    border-bottom: 2px solid #e63946;
}

header a {
    color: #e63946;
    text-decoration: none;
    font-weight: bold;
}

.container {
    max-width: 520px;
    margin: 50px auto;
    background: #111;
    padding: 40px;
    border-radius: 10px;
    border: 1px solid #222;
}

h2 {
    text-align: center;
    margin-bottom: 30px;
    color: #e63946;
}

label {
    font-size: 13px;
    color: #aaa;
}

select {
    width: 100%;
    padding: 12px;
    margin: 8px 0 20px;
    background: #1c1c1c;
    border: 1px solid #222;
    border-radius: 6px;
    color: #fff;
}

button {
    width: 100%;
    padding: 14px;
    background: #e63946;
    border: none;
    border-radius: 6px;
    font-weight: bold;
    color: #fff;
    cursor: pointer;
}

button:hover {
    background: #ff4d5a;
}
</style>
</head>

<body>

<header>
    <a href="inicio.html">← Voltar</a>
</header>

<div class="container">
<h2>Configurações</h2>

<form id="configForm">
    <label>Tema</label>
    <select id="tema">
        <option value="escuro">Escuro</option>
        <option value="claro">Claro</option>
    </select>

    <label>Idioma</label>
    <select id="idioma">
        <option value="pt">Português</option>
        <option value="en">English</option>
    </select>

    <button type="submit">Salvar configurações</button>
</form>
</div>

<script type="module">
import { db } from "./firebase.js";
import { doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const form = document.getElementById("configForm");
const tema = document.getElementById("tema");
const idioma = document.getElementById("idioma");

async function carregarConfig() {
    const ref = doc(db, "configuracoes", "principal");
    const snap = await getDoc(ref);

    if (snap.exists()) {
        const dados = snap.data();
        tema.value = dados.tema || "escuro";
        idioma.value = dados.idioma || "pt";
    }
}

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    await setDoc(doc(db, "configuracoes", "principal"), {
        tema: tema.value,
        idioma: idioma.value,
        atualizadoEm: new Date().toISOString()
    });

    alert("Configurações salvas!");
});

carregarConfig();
</script>

</body>
</html>
